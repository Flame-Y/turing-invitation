var ie=Object.defineProperty;var oe=(d,e,t)=>e in d?ie(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var o=(d,e,t)=>(oe(d,typeof e!="symbol"?e+"":e,t),t);import{e as ae,L as re,O as le,S as ce,F as de,P as ue,V as he,W as pe,a as me,b as fe,E as we,R as ge,B as Ee,c as Ae,d as Me,f as _e,T as D,g as O,A as H,h as P,i as V,j as g,k as U,l as R,m as Q,n as X,r as v,o as ye,p as ve,q as Pe,s as Ce,M as Fe,t as Se,u as xe}from"./vendor.2f76f80b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const Le="_layout_964ts_1",Te="_page_964ts_6",be="_hidden_964ts_11",q={layout:Le,page:Te,hidden:be},Be="_index_page_1wqdz_1",Ne="_canvas_wrapper_1wqdz_6",ze="_container_1wqdz_13",Ie="_test_1wqdz_19",De="_t1mobile_1wqdz_25",Oe="_t1PC_1wqdz_32",He="_t2_1wqdz_40",Ue="_t3_1wqdz_46",Re="_footer_1wqdz_50",We="_left_1wqdz_62",Ge="_right_1wqdz_65",qe="_hidden_1wqdz_74",f={index_page:Be,canvas_wrapper:Ne,container:ze,test:Ie,t1mobile:De,t1PC:Oe,t2:He,t3:Ue,footer:Re,left:We,right:Ge,hidden:qe},C=new ae.exports.EventEmitter,W="/turing-invitation/assets/gradient.2d7d71df.png";function $(d){const e=new Set;let t=[];for(let s=0;s<d.length;s++)t.push(d[s]),s%3===2&&(e.add(t.join(",")),t=[]);const n=[];return e.forEach(s=>{n.push(...s.split(",").map(i=>Number(i)))}),new Float32Array(n)}let B=!1;function N(d,e){return Math.random()*(e-d)+d}class $e{constructor(e){o(this,"CanvasWrapper");o(this,"modelList");o(this,"_LOAD_COUNT_");o(this,"ModelPointer");o(this,"maxParticlesCount");o(this,"WIDTH");o(this,"HEIGHT");o(this,"orbitControls");o(this,"stats");o(this,"scene");o(this,"camera");o(this,"renderer");o(this,"composer");o(this,"PointMaterial");o(this,"AnimateEffectParticle");o(this,"AnimateDuration");o(this,"mouseV");o(this,"mouseK");o(this,"test");o(this,"hadListenMouseMove");o(this,"MainParticleGroup");o(this,"defaultLoader");o(this,"ParticleAnimeMap");o(this,"Models");o(this,"addons");o(this,"onModelsFinishedLoad");o(this,"onRendering");o(this,"CurrentUseModelName");o(this,"LastUseModelName");o(this,"handleWindowResize",()=>{var e,t;this.HEIGHT=window.innerHeight,this.WIDTH=window.innerWidth,(e=this.renderer)==null||e.setSize(this.WIDTH,this.HEIGHT),(t=this.composer)==null||t.reset(),this.camera!=null&&(this.camera.aspect=this.WIDTH/this.HEIGHT,this.camera.updateProjectionMatrix())});o(this,"rotateScene",Q.exports.throttle(e=>{this.hadListenMouseMove===!0&&(this.mouseV=3e-4*(e.clientX-this.WIDTH/2),this.mouseK=1e-4*(e.clientY-this.HEIGHT/2))},100));const{AnimateDuration:t,onModelsFinishedLoad:n}=e,s=new re;s.onStart=function(i,r,p){},s.onLoad=function(){console.log("Loading complete!")},s.onProgress=function(i,r,p){C.emit("message",i,r,p)},s.onError=function(i){console.log("There was an error loading "+i)},this.CanvasWrapper=e.CanvasWrapper,this.addons=e.addons!=null?e.addons:[],this.Models=new Map;for(const i of e.Models)this.Models.set(i.name,i);this.AnimateDuration=typeof t=="number"?t:1500,this.onModelsFinishedLoad=n,this.defaultLoader=new le(s),this.ParticleAnimeMap=[],this.HEIGHT=window.innerHeight,this.WIDTH=window.innerWidth,this.modelList=new Map,this._LOAD_COUNT_=0,this.ModelPointer=0,this.maxParticlesCount=0,this.createScene(),this.initStats(),this._addModels(),this.createEffect(),this.mouseK=0,this.mouseV=0,this.test=0,this.update(0)}createScene(){this.scene=new ce,this.scene.fog=new de(328972,5e-4);const e=100,t=this.WIDTH/this.HEIGHT,n=1,s=5e4;this.camera=new ue(e,t,n,s),this.camera.position.set(0,0,1e3),this.camera.lookAt(new he(0,0,0)),this.addons!=null&&this.addons.forEach(i=>{var r;(r=this.scene)==null||r.add(i.Geometry)}),this.renderer=new pe({alpha:!0}),this.renderer.autoClear=!1,this.renderer.setClearColor(this.scene.fog.color),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=me,this.CanvasWrapper.appendChild(this.renderer.domElement),window.addEventListener("resize",this.handleWindowResize,!1)}initStats(){this.stats=fe(),this.stats!=null&&(this.stats.domElement.style.position="absolute",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.top="0px",this.stats.domElement.style.zIndex="100",this.CanvasWrapper.appendChild(this.stats.domElement))}createEffect(){this.composer=new we(this.renderer);const e=new ge(this.scene,this.camera),t=new Ee(.75),n=new Ae(.5,.5,1500,0),s=new Me(_e);s.uniforms.screenWidth.value=window.innerWidth,s.uniforms.screenHeight.value=window.innerHeight,s.renderToScreen=!0,this.composer.addPass(e),this.composer.addPass(t),this.composer.addPass(n),this.composer.addPass(s)}_addModels(){const e=new D;e.crossOrigin="",this.PointMaterial=new O({size:5,sizeAttenuation:!0,transparent:!0,opacity:1,blending:H,depthWrite:!1,map:e.load(W)}),this.Models.forEach(t=>{let n,s=new Float32Array([]);const i=()=>{var r;this.modelList.set(t.name,n),(r=t.onLoadComplete)==null||r.call(this,n),this._LOAD_COUNT_++,this._LOAD_COUNT_===this.Models.size&&this._finishLoadModal()};if(typeof t.path=="string")if(t.loader!=null){const{loaderInstance:r,load:p}=t.loader;r.load(t.path,u=>{n=p(u),i()})}else this.defaultLoader.load(t.path,r=>{for(const p of r.children){const u=p.geometry.attributes.position.array;s=new Float32Array([...s,...u])}t.NeedRemoveDuplicateParticle===!0&&(s=$(s)),n=new P,n.setAttribute("position",new V($(s),3)),i()});else t.geometry instanceof P&&(n=t.geometry,i())})}_finishLoadModal(){var i,r;let e=0;this.modelList.forEach(p=>{e=Math.max(e,p.attributes.position.count)}),this.maxParticlesCount=e;const t=[],n=1500;this.MainParticleGroup=new g.Group;for(let p=0;p<e;p++){const u=N(-1*n,n),m=N(-1*n,n),w=N(-1*n,n);t.push(u,m,w);const h={x:u,y:m,z:w,isPlaying:!0};h.tweenctx=new g.Tween(h,this.MainParticleGroup).easing(g.Easing.Exponential.In).onComplete(a=>{a.tweenctx._valuesStart.x=a.x,a.tweenctx._valuesStart.y=a.y,a.tweenctx._valuesStart.z=a.z,a.isPlaying=!1}).onStart(a=>{a.tweenctx._valuesStart.x=a.x,a.tweenctx._valuesStart.y=a.y,a.tweenctx._valuesStart.z=a.z,a.isPlaying=!0}),this.ParticleAnimeMap[p]=h}const s=new P;s.setAttribute("position",new U(t,3,!1)),this.AnimateEffectParticle=new R(s,this.PointMaterial),(i=this.scene)==null||i.add(this.AnimateEffectParticle),(r=this.onModelsFinishedLoad)==null||r.call(this,this.AnimateEffectParticle,this.scene)}ChangeModel(e,t=this.AnimateDuration){var u,m,w;const n=this.modelList.get(e);if(e==="wave"?B=!0:B=!1,n==null){console.warn("\u672A\u627E\u5230\u6307\u5B9A\u540D\u5B57\u7684\u6A21\u578B\uFF0C\u6539\u53D8\u64CD\u4F5C\u5DF2\u7EC8\u6B62\uFF01\u4F20\u5165\u7684\u540D\u5B57\uFF1A"+e.toString());return}const s=this.Models.get(e);(u=s.onEnterStart)==null||u.call(this,this.AnimateEffectParticle);const i=n.getAttribute("position"),r=this.AnimateEffectParticle.geometry.getAttribute("position"),p=setTimeout(()=>{var h;(h=s.onEnterEnd)==null||h.call(this,this.AnimateEffectParticle)},t*2);for(let h=0;h<this.maxParticlesCount;h++){const a=this.ParticleAnimeMap[h];this.ParticleAnimeMap[h].isPlaying=!0;const _=h%i.count;a.x=r.getX(h),a.y=r.getY(h),a.z=r.getZ(h),(m=a.tweenctx)==null||m.stop().to({x:i.array[_*3],y:i.array[_*3+1],z:i.array[_*3+2]},t).delay(t*Math.random()).onUpdate(M=>{r.setXYZ(h,M.x,M.y,M.z),r.needsUpdate=!0}).onStop(M=>{clearTimeout(p)}).start()}(w=this.addons)==null||w.forEach(h=>{var a;(a=h.ChangeModel)==null||a.call(this)})}ListenMouseMove(){this.hadListenMouseMove!==!0&&(window.addEventListener("mousemove",this.rotateScene),this.hadListenMouseMove=!0)}StopListenMouseMove(){this.hadListenMouseMove===!0&&(window.removeEventListener("mousemove",this.rotateScene),this.hadListenMouseMove=!1)}AlignCameraCenter(e=!1){if(e&&this.scene!=null){this.scene.rotation.x=0,this.scene.rotation.y=0,this.mouseV=0,this.mouseK=0;return}const t=new MouseEvent("click",{clientX:this.WIDTH/2,clientY:this.HEIGHT/2});this.rotateScene(t)}_updateRotation(){this.scene!=null&&(this.scene.rotation.y+=(this.mouseV-this.scene.rotation.y)/50,this.scene.rotation.x+=(this.mouseK-this.scene.rotation.x)/50)}update(e){var t,n,s,i,r,p;if(B){const u=(t=this.AnimateEffectParticle)==null?void 0:t.geometry;let m=u==null?void 0:u.getAttribute("position");this.ParticleAnimeMap.forEach((h,a)=>{h.isPlaying===!1&&m.setY(a,Math.sin((a+this.test)*.3)*50+Math.sin((a+this.test)*.5)*50)}),this.test+=.05,m.needsUpdate=!0}else this.test=0;g.update(),(n=this.MainParticleGroup)==null||n.update(),(s=this.onRendering)==null||s.call(this,e),(i=this.stats)==null||i.update(),this._updateRotation(),this.Models.forEach(u=>{u.name===this.CurrentUseModelName&&u.onAnimationFrameUpdate!=null&&u.onAnimationFrameUpdate(this.AnimateEffectParticle,this.ParticleAnimeMap)}),(r=this.addons)==null||r.forEach(u=>{u.update()}),(p=this.composer)==null||p.render(),requestAnimationFrame(u=>{this.update(u)})}}class ke{constructor(){o(this,"Geometry");o(this,"update");o(this,"ChangeModel")}}const Y=new D;Y.crossOrigin="";const je=new O({size:7,map:Y.load(W),blending:H,depthWrite:!1,transparent:!0});function z(d,e){return Math.random()*(e-d)+d}class I extends ke{constructor(t){var m;super();o(this,"longestDistance");o(this,"particleSum");o(this,"renderUpdate");o(this,"onChangeModel");o(this,"callback");o(this,"Geometry");o(this,"update",()=>{var t;(t=this.renderUpdate)==null||t.call(this,this.Geometry)});o(this,"ChangeModel",()=>{var t;(t=this.onChangeModel)==null||t.call(this,this.Geometry)});const{longestDistance:n,particleSum:s,renderUpdate:i,onChangeModel:r}=t;this.longestDistance=n,this.particleSum=s,this.renderUpdate=i,this.onChangeModel=r;const p=[];for(let w=0;w<this.particleSum;w++){const h=z(-1*n,n),a=z(-1*n,n),_=z(-1*n,n);p.push(h,a,_)}const u=new P;u.setAttribute("position",new U(p,3)),this.Geometry=new R(u,je),(m=t.callback)==null||m.call(this,this.Geometry)}}const c=X.exports.jsx,A=X.exports.jsxs;let k=!1;function Ve(){const d=v.exports.useRef(null);let e=null;const t={firefly:.002},n=1500,s=new g.Tween(t).easing(g.Easing.Exponential.In),i=new g.Tween(t).easing(g.Easing.Exponential.In),r=new I({longestDistance:n,particleSum:500,renderUpdate:l=>{l.rotation.x-=t.firefly},callback:l=>{l.position.z=-1*n},onChangeModel:()=>{i.stop(),s.stop().to({firefly:.04},1500).chain(i),i.to({firefly:.002},1500),s.start()}}),p=new I({longestDistance:n,particleSum:500,renderUpdate:l=>{l.rotation.y+=t.firefly},callback:l=>{l.position.y=-.2*n,l.position.z=-1*n}}),u=new I({longestDistance:n,particleSum:500,renderUpdate:l=>{l.rotation.z+=t.firefly/2},callback:l=>{l.position.z=-1.2*n}}),m=[{name:"QR-code",path:new URL("/turing-invitation/assets/ball.f680aeec.obj",self.location).href,onLoadComplete(l){l.scale(300,300,300),l.center()}},{name:"turing",path:new URL("/turing-invitation/assets/turing8.7e1d7384.obj",self.location).href,onLoadComplete(l){let E;window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?E=5:E=7,l.scale(E,E,E),l.center(),l.translate(-600,0,0),window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&l.translate(600,150,0)}}];window.changeModel=l=>{e!=null&&e.ChangeModel(l)};const w=["turing","wave","QR-code"],h=new ye,a=new ve(h);new Pe().load(new URL("/turing-invitation/assets/bgm.2816cd09.mp3",self.location).href,function(l){a.setBuffer(l),a.setLoop(!0),a.setVolume(.1)});let M=!1;window.addEventListener("click",()=>{M||(a.play(),M=!0)});function K(){const F=new Float32Array(7500),ee=new Float32Array(2500);let S=0;const te=new D,se=new O({size:5,sizeAttenuation:!0,transparent:!0,opacity:1,blending:H,depthWrite:!1,map:te.load(W)});for(var x=0;x<50;x++)for(var L=0;L<50;L++)F[S]=x*100-50*100/2,F[S+1]=-300,F[S+2]=L*100-50*100/2,S+=3;const T=new P;T.setAttribute("position",new U(F,3)),T.setAttribute("scale",new V(ee,1));const b=new R(T,se).geometry;b.attributes.position.needsUpdate=!0,b.rotateY(-30),m.push({name:"wave",geometry:b,onEnterStart(ne){console.log("wave enter start")},onEnterEnd(ne){}})}function J(){const l={modules:[Fe],direction:"vertical",mousewheel:{invert:!1,thresholdTime:2e3},speed:500,height:window.innerHeight,on:{slideChangeTransitionStart:function(E){e==null||e.ChangeModel(w[E.activeIndex])}}};new Ce(".swiper",l)}const[G,Z]=v.exports.useState(!1);return v.exports.useEffect(()=>{window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&Z(!0),!k&&e==null&&d.current!=null&&(k=!0,J(),K(),e=new $e({CanvasWrapper:d.current,Models:m,addons:[r,p,u],onModelsFinishedLoad:l=>{C.on("enter",E=>{l.rotation.y=-3.14*.8,new g.Tween(l.rotation).to({y:0},1e4).easing(g.Easing.Quintic.Out).start(),setTimeout(()=>{e==null||e.ChangeModel("turing",2e3)},2500),e==null||e.ListenMouseMove()})}}))}),A("div",{className:f.index_page,children:[c("div",{className:f.sound}),c("div",{className:f.screen}),c("div",{className:f.container,children:c("div",{className:`swiper ${f.test}`,children:A("div",{className:"swiper-wrapper",children:[A("div",{className:`swiper-slide ${G?f.t1mobile:f.t1PC}`,children:[c("p",{children:"\u611F\u89C9\u4E0D\u5982\u8499\u5FB7\u571F\u8C46\u997C...\u8425\u517B\u3002"}),c("p",{children:"\u91CE\u5916\u6361\u51E0\u4E2A\u571F\u8C46\u5C31\u80FD\u505A\uFF0C"}),c("p",{children:"\u5403\u4E86\u52A034%\u7684\u8840\u4E24\u4E2A\u5403\u7684\u9971\u9971\u7684\uFF0C"}),c("p",{children:"\u7F3A\u7684\u8425\u517B\u8FD9\u4E00\u5757\u513F\u4E5F\u8865\u4E0A\u4E86\u3002"})]}),A("div",{className:`swiper-slide ${f.t2}`,children:[c("p",{children:"\u63A5\u4E0B\u6765\u7684\u65E5\u5B50\u53EF\u4EE5\u5F00\u59CB\u601D\u8003\u60F3\u53BB\u54EA\u4E2A\u65B9\u5411\uFF0C"}),c("p",{children:"\u76F8\u4FE1\u5F88\u591A\u540C\u5B66\u5DF2\u7ECF\u6709\u4E86\u9009\u62E9\uFF0C"}),c("p",{children:"\u5982\u5BF9\u65B9\u5411\u5C1A\u5B58\u7591\u60D1\uFF0C"}),c("p",{children:"\u6211\u4EEC\u5C06\u572811\u6708\uFF1F\u65E5\u8FDB\u884C\u65B9\u5411\u5BA3\u8BB2\uFF0C"}),c("p",{children:"\u5C4A\u65F6\u5C06\u5F53\u573A\u9009\u62E9\u65B9\u5411"})]}),c("div",{className:`swiper-slide ${f.t3}`,children:"\u8FDB\u5165\u4E0B\u4E00\u8F6E\u7684\u6311\u6218"})]})})}),A("div",{className:`${f.footer} ${G?f.hidden:""}`,children:[c("div",{className:f.left,children:"Copyright \xA9 2022 - CppTeam X TuringTeam"}),A("div",{className:f.right,children:["Powered by  ",c("a",{href:"https://github.com/QingXia-Ela/Up2017-Particles-Effect-Template",target:"_blank",rel:"noreferrer",children:"Up2017-Particles-Effect-Template"})]})]}),c("div",{className:f.canvas_wrapper,ref:d})]})}const Qe="_loading_1w2dn_1",Xe="_logo_1w2dn_13",Ye="_logoInside_1w2dn_13",Ke="_name_1w2dn_16",Je="_progress_1w2dn_20",Ze="_enter_1w2dn_24",et="_hidden_1w2dn_38",y={loading:Qe,logo:Xe,logoInside:Ye,name:Ke,progress:Je,enter:Ze,hidden:et},tt="/turing-invitation/assets/TR_logo.fc31e558.png",st=()=>{v.exports.useState(!1);const[d,e]=v.exports.useState(0);C.on("message",(n,s,i)=>{console.log("Loading file: "+n+`.
Loaded `+s+" of "+i+" files."),e(s/i*100)});const t=()=>{C.emit("enter","enter")};return A("div",{className:`${y.loading}`,children:[c("div",{className:y.logo,children:c("img",{className:y.logoInside,src:tt,alt:""})}),c("div",{className:y.name,children:"TuringTeam Invitation"}),A("div",{className:y.progress,children:[d,"%"]}),c("div",{className:y.enter,onClick:t,children:"\u8FDB\u5165"})]})};function j(){const t=(document.querySelector("html").clientHeight/930*50).toFixed(2);document.querySelector("html").setAttribute("style","font-size:"+t+"px !important")}const nt=()=>{j(),window.addEventListener("resize",Q.exports.throttle(j,200))},it=()=>{const[d,e]=v.exports.useState(!1);return nt(),C.on("enter",t=>{e(!0)}),A("div",{children:[c("div",{className:`${d?q.hidden:""}`,children:c(st,{})}),c("div",{className:q.page,children:c(Ve,{})})]})};function ot(){return c(it,{})}Se.createRoot(document.getElementById("root")).render(c(xe.StrictMode,{children:c(ot,{})}));
