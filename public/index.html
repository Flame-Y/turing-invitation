<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Turing Invitation</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="x-shader/x-vertex" id="vertexshader">
      attribute float size;
      attribute vec3 position2;
      uniform float val;
      varying float opacity;
      void main() {
        // 开始产生模糊的z轴分界
        float border = -150.0;
        // 最模糊的z轴分界
        float min_border = -160.0;
        // 最大透明度
        float max_opacity = 1.0;
        // 最小透明度
        float min_opacity = 0.03;
        // 模糊增加的粒子尺寸范围
      	float sizeAdd = 0.0;

      	vec3 vPos;
        // 变动的val值引导顶点位置的迁移
      	vPos.x = position.x * val + position2.x * (1.-val);
      	vPos.y = position.y* val + position2.y * (1.-val);
      	vPos.z = position.z* val + position2.z * (1.-val);

      	vec4 mvPosition = modelViewMatrix * vec4( vPos, 1.0 );
        gl_PointSize = 4.;
      	if(mvPosition.z > border){
      		opacity = max_opacity;
      	}else if(mvPosition.z < min_border){
      		opacity = min_opacity;
      	}else{
          // 模糊程度随距离远近线性增长
      		float percent = (border - mvPosition.z)/(border - min_border);
      		opacity = (1.0-percent) * (max_opacity - min_opacity) + min_opacity;
      	}
      	gl_Position = projectionMatrix * mvPosition;
      }
    </script>
    <!-- 片元着色器代码 -->
    <script type="x-shader/x-fragment" id="fragmentshader">
      uniform vec3 color;
      varying float opacity;
      void main() {
          gl_FragColor = vec4(color, opacity);
      }
    </script>
  </body>
</html>
